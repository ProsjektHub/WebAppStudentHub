<!DOCTYPE html>
<!-- Class "no-js" /"menu-no-js"  checks if JavaScript is enabled in the visitor's browser. The "no-js" and "menu-no-js" classes are initially added to the html element to handle different styles or functionalities based on whether JavaScript is enabled in the user's browser. -->
<html lang="en" id="top" class="no-js menu-no-js">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudentHub - Your All-in-One Student Organizer</title>
    <meta name="description"
        content="StudentHub is an all-in-one app that helps students manage their daily life, organize tasks, handle finances, and enhance social integration, making it easier to connect and participate in community activities.">



   <!-- This script checks if JavaScript is enabled in the user's browser. 
    If it is, it removes the "menu-no-js" class and adds the "js" class to the html element. 
    This is used to handle different styles or functionalities for the menu button.  -->
    <script>
        document.documentElement.classList.remove('menu-no-js');
        document.documentElement.classList.add('js');
    </script>
    

    <!-- by Dirkje J vd Poel -- dropdown-menu library -->
        <script>
        document.documentElement.classList.remove('no-js');
        document.documentElement.classList.add('js'); 
    </script>

    <!-- <link href="css/style.css" rel="stylesheet"> -->
    <link href="css/style.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

    <!-- by Dirkje J vd Poel -- dropdown-menu library -->
    <script>
        document.documentElement.classList.remove('no-js');
        document.documentElement.classList.add('js'); 
    </script>

</head>


<body class="home">

    <header class="site-header">
        <div class="inside"></div>
        <div class="wrapper">

            <div class="logo-container">
                <a href="index.html">
                    <img src="bilder/logo/iconfinderCom/SVG.svg" srcset="bilder/logo/iconfinderCom/SVG.svg 2x"
                        alt="StudentHub Logo" width="222" height="36">
                </a>
            </div>

            <div class="text-container">
                <h1 class="site-logo">StudentHub</h1>
                <p class="site-slogan">Transform Your Student Life: Achieve More</p>

                <!-- Added by Dirkje J. vd Poel -- User icon with dropdown menu -->
                <div class="dropdown">
                    <!-- User icon that triggers the dropdown menu when clicked -->
                    <i class="fas fa-user dropdown-toggle"
                        onclick="this.nextElementSibling.classList.toggle('show')"></i>
                    <!-- The dropdown menu that shows when the user icon is clicked -->
                    <div class="dropdown-menu">
                        <!-- Link to the login page -->
                        <a href="login.html">Log In</a>
                        <!-- Link to the index page, effectively logging the user out -->
                        <a href="index.html">Log Out</a>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </header>
    

    
   
            

    <nav class="site-nav">
        <div class="inside">
           <!-- Integreret Hamburger Ikon -->
        <span class="hamburger"></span>

            <button class="menubutton" onclick="this.classList.toggle('showmenu')">Menu</button>

            

            <ul>
              <li class="current"><a href="index.html" >Home</a></li>
              
              <li><a href="community.html">Community</a></li>
                <li><a href="tasks.html">Tasks</a></li>
                <li><a href="budget.html">Budget</a></li>
              
                
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>
    
     
    <main class="site-content" id="content"> 

      <div class="inside">

        <section class="content-intro float-umschliessen">

          <h2>Task manager</h2>
          

          <figure class="float-rechts">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
              <path d="m438-240 226-226-58-58-169 169-84-84-57 57 142 142ZM240-80q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h320l240 240v480q0 33-23.5 56.5T720-80H240Zm280-520v-200H240v640h480v-440H520ZM240-800v200-200 640-640Z" fill="#00a3d2"/>
            </svg>
        </figure>
        
        
       

            

          <p>Our task manager is designed just for students like you. </p>
          <p>Easily add, track, and manage your daily tasks to free up more time for the fun stuff. Whether it's meeting deadlines or planning your social life, we've got you covered. </p>
          <p>Start simplifying your studies and enjoy stress-free organization today! </p>
        </section>

        <style>
            .task-list {
                list-style-type: none;
                padding: 0;
                margin-bottom: 30px;
            }
            .site-footer {
                margin-bottom: 0px;
            }
            .task-list-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 10px 0;
                border-bottom: 1px solid #ccc;
            }
            .task-list-item:last-child {
                border-bottom: none; /* Remove border for last item */
            }
            .task-list-item .buttons {
                display: flex;
                gap: 10px;
            }
            #taskInput {
            width: 50%; /* Adjust the width as needed */
            padding: 10px; /* Add padding for better appearance */
            font-size: 16px; /* Increase font size for better readability */
            }
    
            #dueDate {
                width: 16%;
                padding: 8px;
                font-size: 16px;
            }
            
            button {
                font-size: 16px;
            }
    
            .container {
                width: 100%;
                max-width: 870px;
                margin: 0 auto;
                text-align: center;
                padding: 20px;
                background-color: #e7e7e7; /* Light grey background color */
                border-radius: 10px; /* Rounded corners */
                box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); /* Shadow */
                transition: max-width 0.5s ease; /* Smooth transition for max-width change */
            }
            .task-manager-intro {
                padding: 0 20px;
            }
            .empty-message {
                color: #888;
                margin-top: 10px;
            }
            .site-content {
                max-width: 950px;
                margin: 0 auto;
            }
            .archive-section {
                width: 100%;
                max-width: 870px;
                margin: 20px auto 0; /* Center the box and add top margin */
                padding: 20px;
                background-color: #e7e7e7; /* Light grey background color */
                border-radius: 10px; /* Rounded corners */
                box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); /* Shadow */
                transition: max-width 0.5s ease; /* Smooth transition for max-width change */
            }
    
            .archive-section h2 {
                margin: 0; /* Remove default margin for h2 */
                text-align: center;
                padding-bottom: 10px; /* Add bottom padding */
                border-bottom: 1px solid #ccc; /* Add bottom border */
            }
    
            .archive-list {
                list-style-type: none;
                padding: 0;
                margin: 0;
            }
    
            .archive-list .task-list-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 10px 0;
                border-bottom: 1px solid #ccc;
            }
    
            .archive-list .task-list-item:last-child {
                border-bottom: none; /* Remove border for last item */
            }
    
            .archive-list .task-list-item .buttons {
                display: flex;
                gap: 10px;
            }
            .toggle-archive-container {
                text-align: center;
                margin-top: 20px;
            }
            .toggle-archive-btn {
                background-color: #555;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s;
            }
            .toggle-archive-btn:hover {
                background-color: #333;
            }
            .intro-container {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 30px;
            }
            .intro-text {
                flex: 1;
                padding-right: 20px;
            }
            .intro-image {
                flex: 1;
                text-align: center;
            }
            .intro-image img {
                max-width: 100%;
                height: auto;
            }
            .finish-btn {
                background-color: green;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s;
            }
            .finish-btn:hover {
                background-color: darkgreen;
            }
            .delete-btn {
                background-color: red;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s;
            }
            .delete-btn:hover {
                background-color: darkred;
            }
            .restore-btn {
                background-color: green;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s;
            }
            .restore-btn:hover {
                background-color: darkgreen;
            }
        </style>
            <script>
                document.documentElement.classList.remove('no-js'); 
                document.documentElement.classList.add('js'); 
              </script>

      </main>

      
           <div class="container">
            <h2>Add tasks here</h2>
            <div>
                <input type="text" id="taskInput" placeholder="Add new task...">
                <input type="date" id="dueDate">
            </div>
            <button onclick="addTask(document.getElementById('taskInput').value, document.getElementById('dueDate').value)">Add Task</button>

            <!-- Active Tasks -->
            <h2>Active Tasks</h2>
            <ul id="taskList" class="task-list">
                <li class="empty-message" id="activeEmptyMessage">No active tasks</li>
            </ul>
        </div>
        <!-- Task Archive Section -->
        <section class="archive-section">
            <h2>Archive</h2>
            <ul id="archiveList" class="archive-list">
                <!-- Archived tasks will be displayed here -->
            </ul>
        </section>
        <!-- Toggle Archive Button -->
        <div class="toggle-archive-container">
            <button class="toggle-archive-btn" onclick="toggleArchive()">Toggle Archive</button>
        </div>
    </main>
    <footer class="site-footer">
        <div class="inside">
            <nav class="footer-nav">
                <ul>
                    <!-- <li><a href="#">Legal Notice</a></li> -->
                    <li><a href="#">Privacy Protection</a></li>

                    <li><a href="#top">Back to Top </a></li>
                </ul>
            </nav>
        </div>
      </footer>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
          // Function to add a new task
          function addTask() {
              var taskInput = document.getElementById('taskInput').value;
              var dueDate = document.getElementById('dueDate').value;
              var taskList = document.getElementById('taskList');
      
              if (taskInput !== '') {
                  var li = document.createElement('li');
                  li.className = 'task-list-item'; // Added class for styling
                  var deleteButton = document.createElement('button');
                  var finishButton = document.createElement('button');
                  var timerSpan = document.createElement('span');
                  var buttonsDiv = document.createElement('div'); // Container for buttons
                  buttonsDiv.className = 'buttons'; // Added class for styling
      
                  li.textContent = taskInput + (dueDate !== '' ? ' - Due: ' + dueDate : ''); // Include due date if available
      
                  deleteButton.textContent = 'Delete';
                  deleteButton.className = 'delete-btn';
                  deleteButton.onclick = function() {
                      if (confirm('Are you sure you want to delete this task?')) {
                          deleteTask(li); // Call delete task function
                      }
                  };
      
                  finishButton.textContent = 'Finish';
                  finishButton.className = 'finish-btn';
                  finishButton.onclick = function() {
                      moveToArchive(li); // Move finished task to the archive
                      deleteTask(li); // Call delete task function
                  };
      
                  buttonsDiv.appendChild(deleteButton);
                  buttonsDiv.appendChild(finishButton);
      
                  li.appendChild(timerSpan);
                  li.appendChild(buttonsDiv); // Append buttons container
      
                  taskList.appendChild(li);
      
                  // Clear input fields after adding task(s)
                  document.getElementById('taskInput').value = '';
                  document.getElementById('dueDate').value = '';
      
                  // Update timer every second
                  updateTimers();
                  setInterval(updateTimers, 1000);
      
                  // Hide the empty message for active tasks
                  document.getElementById('activeEmptyMessage').style.display = 'none';
      
                  // Hide or show the task list container based on whether there are active tasks
                  updateTaskListVisibility();
      
                  // Call addTask1() to send task data to the server
                  addTask1(taskInput, dueDate);
              }
          }
      
          // Function to add a new task and send it to the server
         // Function to add a new task and send it to the server
         function addTask1(taskInput, dueDate) {
    var taskInputValue = taskInput.trim(); // Trim any leading/trailing whitespace
    var dueDateValue = dueDate.trim(); // Trim any leading/trailing whitespace

    console.log('Task Input:', taskInputValue); // Log taskInputValue to check its value
    console.log('Due Date:', dueDateValue); // Log dueDateValue to check its value

    if (taskInputValue !== '') {
        var formData = {
            taskInput: taskInputValue,
            dueDate: dueDateValue
        };

        // Send AJAX request to server
        $.ajax({
            type: 'POST',
            url: '/add-task',
            data: JSON.stringify(formData),
            contentType: 'application/json',
            success: function(response) {
                console.log('Task added successfully:', response);
                // Optionally, update UI or display a success message
            },
            error: function(xhr, status, error) {
                console.error('Error adding task:', error);
                // Handle error, display error message, etc.
            }
        });
    } else {
        console.error('Task input is empty');
        // Handle empty task input error here, if needed
    }
}


          // Function to update timers for all tasks
function updateTimers() {
    var tasks = document.querySelectorAll('#taskList li');
    tasks.forEach(function(task) {
        var dueDateStr = task.textContent.match(/Due: (\d{4}-\d{2}-\d{2})/);
        if (dueDateStr) {
            var dueDate = new Date(dueDateStr[1] + 'T23:59:59');
            var timeDiff = dueDate - new Date();

            var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            var hoursDiff = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutesDiff = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
            var secondsDiff = Math.floor((timeDiff % (1000 * 60)) / 1000);

            var timerStr = '';

            if (timeDiff < 0) {
                timerStr = 'Overdue';
            } else {
                timerStr = 'Due in ';
                if (daysDiff > 0) timerStr += daysDiff + 'd ';
                if (hoursDiff > 0) timerStr += hoursDiff + 'h ';
                if (minutesDiff > 0) timerStr += minutesDiff + 'm ';
                timerStr += secondsDiff + 's';
            }

            task.querySelector('span').textContent = timerStr;
        }
    });
}
// Function to update task list visibility based on whether there are active tasks
function updateTaskListVisibility() {
    var taskList = document.getElementById('taskList');

    if (taskList.children.length > 1) { // If there are tasks other than the empty message
        taskList.style.display = 'block'; // Show task list
    } else {
        taskList.style.display = 'none'; // Hide task list
    }
}

      </script>
      
</body>
</html>
